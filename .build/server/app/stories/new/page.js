(()=>{var e={};e.id=4378,e.ids=[4378],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},6162:e=>{"use strict";e.exports=require("stream")},1764:e=>{"use strict";e.exports=require("util")},2853:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(5282),r(9030),r(5866);var i=r(3191),n=r(8716),s=r(7922),a=r.n(s),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["stories",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5282)),"/home/ubuntu/em-interview-prep/app/stories/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9030)),"/home/ubuntu/em-interview-prep/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/em-interview-prep/app/stories/new/page.tsx"],u="/stories/new/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/stories/new/page",pathname:"/stories/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7158:(e,t,r)=>{Promise.resolve().then(r.bind(r,9178)),Promise.resolve().then(r.bind(r,4749))},4749:(e,t,r)=>{"use strict";r.d(t,{StoryForm:()=>v});var i=r(326),n=r(7577),s=r(5047),a=r(3071),o=r(772),l=r(4432),c=r(7673),d=r(567),u=r(4215),p=r(6283),h=r(3468),f=r(2189),m=r(7069),y=r(3855),g=r(4019),x=r(1215);function v({userId:e,initialData:t,isEditing:r=!1}){let[v,b]=(0,n.useState)({title:t?.title||"",situation:t?.situation||"",task:t?.task||"",action:t?.action||"",result:t?.result||"",reflection:t?.reflection||"",tags:t?.tags||[],categories:t?.categories||[]}),[j,w]=(0,n.useState)(""),[k,S]=(0,n.useState)(!1),_=(0,s.useRouter)(),{toast:R}=(0,u.pm)(),P=(e,t)=>{b(r=>({...r,[e]:t}))},N=()=>{j.trim()&&!v.tags.includes(j.trim())&&(b(e=>({...e,tags:[...e.tags,j.trim()]})),w(""))},C=e=>{b(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},O=e=>{b(t=>({...t,categories:t.categories.includes(e)?t.categories.filter(t=>t!==e):[...t.categories,e]}))},M=async e=>{if(e.preventDefault(),!v.title.trim()||!v.situation.trim()||!v.task.trim()||!v.action.trim()||!v.result.trim()){R({title:"Error",description:"Please fill in all required STAR fields.",variant:"destructive"});return}S(!0);try{let e=r?`/api/stories/${t?.id}`:"/api/stories",i=await fetch(e,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!i.ok)throw Error(`Failed to ${r?"update":"create"} story`);let n=await i.json();R({title:`Story ${r?"updated":"created"}!`,description:`Your story "${v.title}" has been ${r?"updated":"saved"} successfully.`}),_.push(`/stories/${n.id}`)}catch(e){R({title:"Error",description:`Failed to ${r?"update":"create"} story. Please try again.`,variant:"destructive"})}finally{S(!1)}},T=[{key:"situation",title:"Situation",icon:p.Z,color:"text-blue-600",placeholder:"Describe the context and background. Where and when did this take place? What was the environment or circumstances?",description:"Set the scene with specific details about the context"},{key:"task",title:"Task",icon:h.Z,color:"text-green-600",placeholder:"Explain what needed to be accomplished. What was your responsibility or goal? What challenge did you face?",description:"Define the objective or challenge you needed to address"},{key:"action",title:"Action",icon:f.Z,color:"text-orange-600",placeholder:"Detail the specific steps you took. Focus on YOUR actions and decisions. What did you do and why?",description:"Describe your specific actions and decision-making process"},{key:"result",title:"Result",icon:m.Z,color:"text-purple-600",placeholder:"Share the outcomes and impact. Use metrics when possible. What did you learn or how did you grow?",description:"Quantify the outcomes and highlight lessons learned"}];return(0,i.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[(0,i.jsxs)(a.Zb,{children:[(0,i.jsxs)(a.Ol,{children:[i.jsx(a.ll,{children:"Story Title"}),i.jsx(a.SZ,{children:"Give your story a memorable and descriptive title"})]}),i.jsx(a.aY,{children:i.jsx(l.I,{placeholder:"e.g., Leading Team Through Major Cloud Migration",value:v.title,onChange:e=>P("title",e.target.value),required:!0})})]}),T.map(e=>{let t=e.icon;return(0,i.jsxs)(a.Zb,{children:[(0,i.jsxs)(a.Ol,{children:[(0,i.jsxs)(a.ll,{className:"flex items-center gap-2",children:[i.jsx(t,{className:`h-5 w-5 ${e.color}`}),e.title]}),i.jsx(a.SZ,{children:e.description})]}),i.jsx(a.aY,{children:i.jsx(c.g,{placeholder:e.placeholder,value:v[e.key],onChange:t=>P(e.key,t.target.value),className:"min-h-32",required:"reflection"!==e.key})})]},e.key)}),(0,i.jsxs)(a.Zb,{children:[(0,i.jsxs)(a.Ol,{children:[(0,i.jsxs)(a.ll,{className:"flex items-center gap-2",children:[i.jsx(f.Z,{className:"h-5 w-5 text-yellow-600"}),"Reflection (Optional)"]}),i.jsx(a.SZ,{children:"What would you do differently? What additional insights did you gain?"})]}),i.jsx(a.aY,{children:i.jsx(c.g,{placeholder:"Reflect on what you learned, what you might do differently, or additional insights gained from this experience...",value:v.reflection,onChange:e=>P("reflection",e.target.value),className:"min-h-24"})})]}),(0,i.jsxs)(a.Zb,{children:[(0,i.jsxs)(a.Ol,{children:[i.jsx(a.ll,{children:"Categories"}),i.jsx(a.SZ,{children:"Select the interview categories this story addresses"})]}),i.jsx(a.aY,{children:i.jsx("div",{className:"flex flex-wrap gap-2",children:["leadership","conflict_resolution","team_building","technical_decisions","ambiguity","communication"].map(e=>i.jsx(d.C,{variant:v.categories.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>O(e),children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})})]}),(0,i.jsxs)(a.Zb,{children:[(0,i.jsxs)(a.Ol,{children:[i.jsx(a.ll,{children:"Tags"}),i.jsx(a.SZ,{children:"Add tags to help organize and search your stories"})]}),(0,i.jsxs)(a.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(l.I,{placeholder:"Add a tag...",value:j,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),N())}),i.jsx(o.z,{type:"button",variant:"outline",onClick:N,children:i.jsx(y.Z,{className:"h-4 w-4"})})]}),v.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.map(e=>(0,i.jsxs)(d.C,{variant:"secondary",className:"cursor-pointer",children:[e,i.jsx(g.Z,{className:"h-3 w-3 ml-1",onClick:()=>C(e)})]},e))})]})]}),(0,i.jsxs)("div",{className:"flex gap-4 justify-end",children:[i.jsx(o.z,{type:"button",variant:"outline",onClick:()=>_.back(),disabled:k,children:"Cancel"}),(0,i.jsxs)(o.z,{type:"submit",disabled:k,children:[i.jsx(x.Z,{className:"h-4 w-4 mr-2"}),k?`${r?"Updating":"Creating"}...`:`${r?"Update":"Create"} Story`]})]})]})}},7673:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var i=r(326),n=r(7577),s=r(7863);let a=n.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));a.displayName="Textarea"},6283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(2881).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},2189:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(2881).Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(2881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5282:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,dynamic:()=>l});var i=r(9510),n=r(5786),s=r(8585),a=r(2427);let o=(0,r(8570).createProxy)(String.raw`/home/ubuntu/em-interview-prep/components/stories/story-form.tsx#StoryForm`),l="force-dynamic";async function c(){let e=await (0,n.Gg)();return e||(0,s.redirect)("/login"),(0,i.jsxs)("div",{className:"min-h-screen bg-background",children:[i.jsx(a.h,{user:e}),i.jsx("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Create New Story"}),i.jsx("p",{className:"text-muted-foreground",children:"Use the STAR format to create a compelling interview story"})]}),i.jsx(o,{userId:e.id})]})})]})}},2427:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});let i=(0,r(8570).createProxy)(String.raw`/home/ubuntu/em-interview-prep/components/layout/header.tsx#Header`)},5786:(e,t,r)=>{"use strict";r.d(t,{Gg:()=>l,Z1:()=>c,mk:()=>o});var i=r(1482),n=r.n(i);r(9487);let s=process.env.JWT_SECRET||"your-secret-key";async function a(e){try{let t=e.cookies.get("token")?.value;if(!t)return null;let r=n().verify(t,s);if(!r.userId)return null;return{id:r.userId,username:r.username,isAdmin:r.isAdmin||!1}}catch(e){return console.error("Token verification error:",e),null}}async function o(e){let t=await a(e);if(!t)throw Error("Authentication required");return t}async function l(e){return e?await a(e):null}async function c(){try{let{cookies:e}=await r.e(1615).then(r.bind(r,1615)),t=e(),i=t.get("token")?.value;if(!i)return null;let a=n().verify(i,s);if(!a.userId)return null;return{id:a.userId,username:a.username,isAdmin:a.isAdmin||!1}}catch(e){return console.error("Server session error:",e),null}}},9487:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var i=r(3524);let n=globalThis.prisma??new i.PrismaClient},8585:(e,t,r)=>{"use strict";var i=r(1085);r.o(i,"notFound")&&r.d(t,{notFound:function(){return i.notFound}}),r.o(i,"redirect")&&r.d(t,{redirect:function(){return i.redirect}})},1085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return i.RedirectType},notFound:function(){return n.notFound},permanentRedirect:function(){return i.permanentRedirect},redirect:function(){return i.redirect}});let i=r(3953),n=r(6399);class s extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new s}delete(){throw new s}set(){throw new s}sort(){throw new s}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return n},notFound:function(){return i}});let r="NEXT_NOT_FOUND";function i(){let e=Error(r);throw e.digest=r,e}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3953:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return i},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return h},getURLFromRedirectError:function(){return p},isRedirectError:function(){return u},permanentRedirect:function(){return d},redirect:function(){return c}});let n=r(4580),s=r(2934),a=r(8586),o="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let i=Error(o);i.digest=o+";"+t+";"+e+";"+r+";";let s=n.requestAsyncStorage.getStore();return s&&(i.mutableCookies=s.mutableCookies),i}function c(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,i,n]=e.digest.split(";",4),s=Number(n);return t===o&&("replace"===r||"push"===r)&&"string"==typeof i&&!isNaN(s)&&s in a.RedirectStatusCode}function p(e){return u(e)?e.digest.split(";",3)[2]:null}function h(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(i||(i={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,2023,1482,6547,8708,3733],()=>r(2853));module.exports=i})();