"use strict";(()=>{var e={};e.id=6051,e.ids=[6051],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1391:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>_,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>q,staticGenerationAsyncStorage:()=>m});var i={};s.r(i),s.d(i,{GET:()=>p,dynamic:()=>c});var n=s(9303),r=s(8716),a=s(670),o=s(7070),u=s(9487);let c="force-dynamic";async function p(e){try{let{searchParams:t}=new URL(e.url),s="true"===t.get("includeSystemDesign"),i=(await u._.companies.findMany({include:{questions:{where:s?{}:{question_type:{not:"system_design"}},include:{_count:{select:{answers:!0,system_design_answers:!0}}},orderBy:[{is_critical:"desc"},{usage_count:"desc"}]},_count:{select:{questions:!0}}},orderBy:{name:"asc"}})).map(e=>({id:e.id,name:e.name,values:e.values,evaluationCriteria:e.evaluation_criteria,interviewFormat:e.interview_format,successTips:e.success_tips,redFlags:e.red_flags,questions:e.questions.map(e=>({...e,questionText:e.question_text,questionType:e.question_type,isCritical:e.is_critical,usageCount:e.usage_count,createdAt:e.created_at,updatedAt:e.updated_at})),questionCount:e._count.questions}));return o.NextResponse.json({companies:i})}catch(e){return console.error("Companies with questions fetch error:",e),o.NextResponse.json({error:"Failed to fetch companies with questions"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/companies/with-questions/route",pathname:"/api/companies/with-questions",filename:"route",bundlePath:"app/api/companies/with-questions/route"},resolvedPagePath:"/home/ubuntu/em-interview-prep/app/api/companies/with-questions/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:q}=d,_="/api/companies/with-questions/route";function h(){return(0,a.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:m})}},9487:(e,t,s)=>{s.d(t,{_:()=>n});var i=s(3524);let n=globalThis.prisma??new i.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[9276,5972],()=>s(1391));module.exports=i})();