"use strict";(()=>{var e={};e.id=4118,e.ids=[4118],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4141:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var r={};t.r(r),t.d(r,{GET:()=>p,dynamic:()=>c});var i=t(9303),n=t(8716),o=t(670),a=t(7070),u=t(9487);let c="force-dynamic";async function p(e){try{let{searchParams:s}=new URL(e.url),t=s.get("company");if(!t)return a.NextResponse.json({error:"Company name is required"},{status:400});let r=await u._.companies.findUnique({where:{name:t},include:{questions:{where:{question_type:"system_design"},include:{system_design_questions:!0,_count:{select:{system_design_answers:!0}}},orderBy:[{is_critical:"desc"},{usage_count:"desc"}]}}});if(!r)return a.NextResponse.json({error:"Company not found"},{status:404});let i=r.questions.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{});return a.NextResponse.json({company:{id:r.id,name:r.name,values:r.values,evaluationCriteria:r.evaluation_criteria,interviewFormat:r.interview_format,successTips:r.success_tips,redFlags:r.red_flags},systemDesignQuestions:r.questions,questionsByCategory:i,stats:{totalQuestions:r.questions.length,criticalQuestions:r.questions.filter(e=>e.is_critical).length,categories:Object.keys(i).length}})}catch(e){return console.error("System design questions fetch error:",e),a.NextResponse.json({error:"Failed to fetch system design questions"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/companies/system-design/route",pathname:"/api/companies/system-design",filename:"route",bundlePath:"app/api/companies/system-design/route"},resolvedPagePath:"/home/ubuntu/em-interview-prep/app/api/companies/system-design/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:g}=d,y="/api/companies/system-design/route";function h(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},9487:(e,s,t)=>{t.d(s,{_:()=>i});var r=t(3524);let i=globalThis.prisma??new r.PrismaClient}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,5972],()=>t(4141));module.exports=r})();