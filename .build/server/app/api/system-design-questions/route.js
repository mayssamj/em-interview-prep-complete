"use strict";(()=>{var e={};e.id=661,e.ids=[661],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7023:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>y,patchFetch:()=>q,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>_});var i={};s.r(i),s.d(i,{GET:()=>d,POST:()=>p,dynamic:()=>c});var r=s(9303),n=s(8716),a=s(670),o=s(7070),u=s(9487);let c="force-dynamic";async function d(e){try{let{searchParams:t}=new URL(e.url),s=t.get("company"),i=t.get("difficulty"),r=t.get("category"),n=t.get("critical"),a={question_type:"system_design"};i&&"all"!==i&&(a.difficulty=i),r&&"all"!==r&&(a.category=r),"true"===n&&(a.is_critical=!0);let c=await u._.questions.findMany({where:a,include:{companies:!0,system_design_questions:!0,_count:{select:{answers:!0,system_design_answers:!0}}},orderBy:[{is_critical:"desc"},{usage_count:"desc"},{created_at:"desc"}]}),d=c;return s&&"all"!==s&&(d=c.filter(e=>e.companies?.name===s)),o.NextResponse.json(d)}catch(e){return console.error("Error fetching system design questions:",e),o.NextResponse.json({error:"Failed to fetch system design questions"},{status:500})}}async function p(e){try{let{companyId:t,category:s,questionText:i,difficulty:r,tags:n,isCritical:a,architectureFocus:c,complexityLevel:d,leadershipAspects:p,frameworks:l,evaluationCriteria:m,resources:_,estimatedTimeMinutes:g,followUpQuestions:y,commonMistakes:q,keyTradeoffs:f}=await e.json(),h=i.toLowerCase().replace(/[^a-z0-9]+/g,"_").substring(0,50)+"_"+Math.random().toString(36).substring(2,8),w=await u._.questions.create({data:{id:h,company_id:t,category:s,question_text:i,difficulty:r,question_type:"system_design",tags:n||[],is_critical:a||!1,is_generated:!1,updated_at:new Date},include:{companies:!0,system_design_questions:!0}});return await u._.system_design_questions.create({data:{id:h+"_system_design",question_id:h,architecture_focus:c||[],complexity_level:d||"mid",leadership_aspects:p||[],frameworks:l||[],evaluation_criteria:m||[],resources:_||[],estimated_time_minutes:g,follow_up_questions:y||[],common_mistakes:q||[],key_tradeoffs:f||[],updated_at:new Date}}),o.NextResponse.json(w,{status:201})}catch(e){return console.error("Error creating system design question:",e),o.NextResponse.json({error:"Failed to create system design question"},{status:500})}}let l=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/system-design-questions/route",pathname:"/api/system-design-questions",filename:"route",bundlePath:"app/api/system-design-questions/route"},resolvedPagePath:"/home/ubuntu/em-interview-prep/app/api/system-design-questions/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:_,serverHooks:g}=l,y="/api/system-design-questions/route";function q(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:_})}},9487:(e,t,s)=>{s.d(t,{_:()=>r});var i=s(3524);let r=globalThis.prisma??new i.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[9276,5972],()=>s(7023));module.exports=i})();