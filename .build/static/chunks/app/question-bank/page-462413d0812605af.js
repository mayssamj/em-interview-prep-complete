(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{2438:function(e,s,a){Promise.resolve().then(a.bind(a,7411)),Promise.resolve().then(a.bind(a,4430))},4430:function(e,s,a){"use strict";a.d(s,{QuestionBankClient:function(){return y}});var t=a(7437),l=a(2265),n=a(9376),r=a(6070),i=a(3647),d=a(5974),c=a(2869),o=a(5186),u=a(6818),x=a(6110),m=a(5153),h=a(1723),f=a(740),g=a(3247),j=a(6595),p=a(1671),v=a(3417),w=a(2720);function y(e){let{questions:s,answeredQuestionIds:a,userId:y}=e,N=(0,n.useSearchParams)(),[b,k]=(0,l.useState)(""),[C,S]=(0,l.useState)("all"),[Q,q]=(0,l.useState)("all"),[A,Z]=(0,l.useState)("all"),[P,V]=(0,l.useState)("all"),[_,z]=(0,l.useState)("all"),[O,B]=(0,l.useState)(""),[E,R]=(0,l.useState)(""),[T,Y]=(0,l.useState)(!1),[L,D]=(0,l.useState)([]),{toast:F}=(0,m.pm)();(0,l.useEffect)(()=>{"critical"===N.get("filter")&&z("critical")},[N]),(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/questions/recent");if(e.ok){let s=await e.json();D(s)}}catch(e){console.error("Failed to fetch recent questions:",e)}})()},[]);let I=[...new Set(s.map(e=>{var s;return null===(s=e.companies)||void 0===s?void 0:s.name}).filter(Boolean))].sort(),U=[...new Set(s.map(e=>e.category))].sort(),J=[...new Set(s.map(e=>e.difficulty))].sort(),K=s.filter(e=>{var s;let t=""===b||e.question_text.toLowerCase().includes(b.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(b.toLowerCase())),l="all"===C||(null===(s=e.companies)||void 0===s?void 0:s.name)===C,n="all"===Q||e.category===Q,r="all"===A||e.difficulty===A,i=a.has(e.id),d="all"===P||"answered"===P&&i||"unanswered"===P&&!i,c="all"===_||"critical"===_&&e.is_critical;return t&&l&&n&&r&&d&&c}),$=e=>{switch(e.toLowerCase()){case"meta":return"bg-blue-500";case"amazon":return"bg-orange-500";case"google":return"bg-green-500";default:return"bg-gray-500"}},H=e=>{switch(e.toLowerCase()){case"easy":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"hard":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},G=async e=>{try{await fetch("/api/questions/track-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:e})})}catch(e){console.error("Failed to track question view:",e)}},M=async e=>{if(!O.trim()){F({title:"Error",description:"Please provide an answer.",variant:"destructive"});return}Y(!0);try{if((await fetch("/api/answers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:e,answerText:O.trim(),notes:E.trim()||null})})).ok)F({title:"Success",description:"Your answer has been saved."}),B(""),R(""),await G(e),window.location.reload();else throw Error("Failed to save answer")}catch(e){F({title:"Error",description:"Failed to save your answer. Please try again.",variant:"destructive"})}finally{Y(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[L.length>0&&(0,t.jsxs)(r.Zb,{children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5"}),"Recent Questions"]}),(0,t.jsx)(r.SZ,{children:"Questions you've recently viewed or answered"})]}),(0,t.jsx)(r.aY,{children:(0,t.jsx)("div",{className:"space-y-2",children:L.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm line-clamp-1",children:e.question_text}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.companies.name})]}),(0,t.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>{let s=document.getElementById("question-".concat(e.id));s&&s.scrollIntoView({behavior:"smooth"})},children:"View"})]},e.id))})})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsx)(r.Ol,{children:(0,t.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5"}),"Search & Filter Questions"]})}),(0,t.jsxs)(r.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(o.I,{type:"text",placeholder:"Search questions or tags...",value:b,onChange:e=>k(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)(i.Ph,{value:C,onValueChange:S,children:[(0,t.jsx)(i.i4,{children:(0,t.jsx)(i.ki,{placeholder:"Company"})}),(0,t.jsxs)(i.Bw,{children:[(0,t.jsx)(i.Ql,{value:"all",children:"All Companies"}),I.map(e=>(0,t.jsx)(i.Ql,{value:e,children:e},e))]})]}),(0,t.jsxs)(i.Ph,{value:Q,onValueChange:q,children:[(0,t.jsx)(i.i4,{children:(0,t.jsx)(i.ki,{placeholder:"Category"})}),(0,t.jsxs)(i.Bw,{children:[(0,t.jsx)(i.Ql,{value:"all",children:"All Categories"}),U.map(e=>(0,t.jsx)(i.Ql,{value:e,children:e},e))]})]}),(0,t.jsxs)(i.Ph,{value:A,onValueChange:Z,children:[(0,t.jsx)(i.i4,{children:(0,t.jsx)(i.ki,{placeholder:"Difficulty"})}),(0,t.jsxs)(i.Bw,{children:[(0,t.jsx)(i.Ql,{value:"all",children:"All Difficulties"}),J.map(e=>(0,t.jsx)(i.Ql,{value:e,children:e},e))]})]}),(0,t.jsxs)(i.Ph,{value:P,onValueChange:V,children:[(0,t.jsx)(i.i4,{children:(0,t.jsx)(i.ki,{placeholder:"Status"})}),(0,t.jsxs)(i.Bw,{children:[(0,t.jsx)(i.Ql,{value:"all",children:"All Questions"}),(0,t.jsx)(i.Ql,{value:"answered",children:"Answered"}),(0,t.jsx)(i.Ql,{value:"unanswered",children:"Unanswered"})]})]}),(0,t.jsxs)(i.Ph,{value:_,onValueChange:z,children:[(0,t.jsx)(i.i4,{children:(0,t.jsx)(i.ki,{placeholder:"Priority"})}),(0,t.jsxs)(i.Bw,{children:[(0,t.jsx)(i.Ql,{value:"all",children:"All Questions"}),(0,t.jsx)(i.Ql,{value:"critical",children:"Critical Only"})]})]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",K.length," of ",s.length," questions"]})]})]}),(0,t.jsx)("div",{className:"grid gap-4",children:K.map(e=>{var s,l;let n=a.has(e.id);return(0,t.jsxs)(r.Zb,{id:"question-".concat(e.id),className:"overflow-hidden",children:[(0,t.jsx)(r.Ol,{className:"pb-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat($((null===(s=e.companies)||void 0===s?void 0:s.name)||""))}),(0,t.jsx)("span",{className:"text-sm font-medium",children:(null===(l=e.companies)||void 0===l?void 0:l.name)||"Unknown"}),(0,t.jsx)(d.C,{variant:"outline",className:"text-xs",children:e.category}),(0,t.jsx)(d.C,{className:"text-xs ".concat(H(e.difficulty)),children:e.difficulty}),e.is_critical&&(0,t.jsxs)(d.C,{variant:"default",className:"text-xs bg-red-500",children:[(0,t.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Critical"]}),n&&(0,t.jsxs)(d.C,{variant:"default",className:"text-xs bg-green-500",children:[(0,t.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),"Answered"]})]}),(0,t.jsx)(r.ll,{className:"text-lg leading-relaxed",children:e.question_text})]}),(0,t.jsxs)(x.Vq,{children:[(0,t.jsx)(x.hg,{asChild:!0,children:(0,t.jsxs)(c.z,{variant:n?"outline":"default",size:"sm",onClick:()=>{B(""),R("")},children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),n?"Update Answer":"Answer"]})}),(0,t.jsxs)(x.cZ,{className:"max-w-2xl",children:[(0,t.jsxs)(x.fK,{children:[(0,t.jsx)(x.$N,{children:"Answer Question"}),(0,t.jsx)(x.Be,{children:e.question_text})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Your Answer"}),(0,t.jsx)(u.g,{placeholder:"Provide your detailed answer using the STAR method (Situation, Task, Action, Result)...",value:O,onChange:e=>B(e.target.value),rows:8})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),(0,t.jsx)(u.g,{placeholder:"Add any additional notes, key points to remember, or areas for improvement...",value:E,onChange:e=>R(e.target.value),rows:3})]}),(0,t.jsx)(c.z,{onClick:()=>M(e.id),disabled:T,className:"w-full",children:T?"Saving...":"Save Answer"})]})]})]})]})}),e.tags.length>0&&(0,t.jsx)(r.aY,{className:"pt-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"}),e.tags.map((e,s)=>(0,t.jsx)(d.C,{variant:"secondary",className:"text-xs",children:e},s))]})})]},e.id)})}),0===K.length&&(0,t.jsx)(r.Zb,{children:(0,t.jsx)(r.aY,{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No questions found matching your criteria."})})})]})}},6110:function(e,s,a){"use strict";a.d(s,{$N:function(){return h},Be:function(){return f},Vq:function(){return d},cZ:function(){return x},fK:function(){return m},hg:function(){return c}});var t=a(7437),l=a(2265),n=a(9027),r=a(2489),i=a(4508);let d=n.fC,c=n.xz,o=n.h_;n.x8;let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});u.displayName=n.aV.displayName;let x=l.forwardRef((e,s)=>{let{className:a,children:l,...d}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(u,{}),(0,t.jsxs)(n.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[l,(0,t.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=n.VY.displayName;let m=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};m.displayName="DialogHeader";let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});h.displayName=n.Dx.displayName;let f=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});f.displayName=n.dk.displayName},6818:function(e,s,a){"use strict";a.d(s,{g:function(){return r}});var t=a(7437),l=a(2265),n=a(4508);let r=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});r.displayName="Textarea"}},function(e){e.O(0,[73,858,657,243,787,971,117,744],function(){return e(e.s=2438)}),_N_E=e.O()}]);