(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{823:function(e,t,i){Promise.resolve().then(i.bind(i,7411)),Promise.resolve().then(i.bind(i,5684))},5684:function(e,t,i){"use strict";i.d(t,{StoryForm:function(){return v}});var a=i(7437),s=i(2265),n=i(9376),l=i(6070),r=i(2869),o=i(5186),c=i(6818),d=i(5974),u=i(5153),h=i(8736),p=i(8896),g=i(5846),f=i(525),y=i(9397),x=i(2489),m=i(3229);function v(e){let{userId:t,initialData:i,isEditing:v=!1}=e,[j,b]=(0,s.useState)({title:(null==i?void 0:i.title)||"",situation:(null==i?void 0:i.situation)||"",task:(null==i?void 0:i.task)||"",action:(null==i?void 0:i.action)||"",result:(null==i?void 0:i.result)||"",reflection:(null==i?void 0:i.reflection)||"",tags:(null==i?void 0:i.tags)||[],categories:(null==i?void 0:i.categories)||[]}),[k,w]=(0,s.useState)(""),[Z,N]=(0,s.useState)(!1),S=(0,n.useRouter)(),{toast:C}=(0,u.pm)(),M=(e,t)=>{b(i=>({...i,[e]:t}))},O=()=>{k.trim()&&!j.tags.includes(k.trim())&&(b(e=>({...e,tags:[...e.tags,k.trim()]})),w(""))},T=e=>{b(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},_=e=>{b(t=>({...t,categories:t.categories.includes(e)?t.categories.filter(t=>t!==e):[...t.categories,e]}))},z=async e=>{if(e.preventDefault(),!j.title.trim()||!j.situation.trim()||!j.task.trim()||!j.action.trim()||!j.result.trim()){C({title:"Error",description:"Please fill in all required STAR fields.",variant:"destructive"});return}N(!0);try{let e=v?"/api/stories/".concat(null==i?void 0:i.id):"/api/stories",t=await fetch(e,{method:v?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!t.ok)throw Error("Failed to ".concat(v?"update":"create"," story"));let a=await t.json();C({title:"Story ".concat(v?"updated":"created","!"),description:'Your story "'.concat(j.title,'" has been ').concat(v?"updated":"saved"," successfully.")}),S.push("/stories/".concat(a.id))}catch(e){C({title:"Error",description:"Failed to ".concat(v?"update":"create"," story. Please try again."),variant:"destructive"})}finally{N(!1)}},E=[{key:"situation",title:"Situation",icon:h.Z,color:"text-blue-600",placeholder:"Describe the context and background. Where and when did this take place? What was the environment or circumstances?",description:"Set the scene with specific details about the context"},{key:"task",title:"Task",icon:p.Z,color:"text-green-600",placeholder:"Explain what needed to be accomplished. What was your responsibility or goal? What challenge did you face?",description:"Define the objective or challenge you needed to address"},{key:"action",title:"Action",icon:g.Z,color:"text-orange-600",placeholder:"Detail the specific steps you took. Focus on YOUR actions and decisions. What did you do and why?",description:"Describe your specific actions and decision-making process"},{key:"result",title:"Result",icon:f.Z,color:"text-purple-600",placeholder:"Share the outcomes and impact. Use metrics when possible. What did you learn or how did you grow?",description:"Quantify the outcomes and highlight lessons learned"}];return(0,a.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Story Title"}),(0,a.jsx)(l.SZ,{children:"Give your story a memorable and descriptive title"})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)(o.I,{placeholder:"e.g., Leading Team Through Major Cloud Migration",value:j.title,onChange:e=>M("title",e.target.value),required:!0})})]}),E.map(e=>{let t=e.icon;return(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(t,{className:"h-5 w-5 ".concat(e.color)}),e.title]}),(0,a.jsx)(l.SZ,{children:e.description})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)(c.g,{placeholder:e.placeholder,value:j[e.key],onChange:t=>M(e.key,t.target.value),className:"min-h-32",required:"reflection"!==e.key})})]},e.key)}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-yellow-600"}),"Reflection (Optional)"]}),(0,a.jsx)(l.SZ,{children:"What would you do differently? What additional insights did you gain?"})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)(c.g,{placeholder:"Reflect on what you learned, what you might do differently, or additional insights gained from this experience...",value:j.reflection,onChange:e=>M("reflection",e.target.value),className:"min-h-24"})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Categories"}),(0,a.jsx)(l.SZ,{children:"Select the interview categories this story addresses"})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["leadership","conflict_resolution","team_building","technical_decisions","ambiguity","communication"].map(e=>(0,a.jsx)(d.C,{variant:j.categories.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>_(e),children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Tags"}),(0,a.jsx)(l.SZ,{children:"Add tags to help organize and search your stories"})]}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.I,{placeholder:"Add a tag...",value:k,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),O())}),(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:O,children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}),j.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:j.tags.map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"cursor-pointer",children:[e,(0,a.jsx)(x.Z,{className:"h-3 w-3 ml-1",onClick:()=>T(e)})]},e))})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>S.back(),disabled:Z,children:"Cancel"}),(0,a.jsxs)(r.z,{type:"submit",disabled:Z,children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),Z?"".concat(v?"Updating":"Creating","..."):"".concat(v?"Update":"Create"," Story")]})]})]})}},6818:function(e,t,i){"use strict";i.d(t,{g:function(){return l}});var a=i(7437),s=i(2265),n=i(4508);let l=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:t,...s})});l.displayName="Textarea"},8736:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},5846:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},9397:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3229:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])}},function(e){e.O(0,[73,858,657,787,971,117,744],function(){return e(e.s=823)}),_N_E=e.O()}]);