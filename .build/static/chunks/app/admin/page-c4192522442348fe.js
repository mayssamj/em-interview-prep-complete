(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{5965:function(e,t,n){Promise.resolve().then(n.bind(n,579))},579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(7437),a=n(2265),c=n(9376),r=n(7411),i=n(6070),l=n(2869),d=n(5974),o=n(8906),u=n(5805),m=n(1769),h=n(3417);let x=(0,n(9205).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var f=n(5153);function y(){let[e,t]=(0,a.useState)(null),[n,y]=(0,a.useState)(null),[p,k]=(0,a.useState)(!0),g=(0,c.useRouter)(),{toast:j}=(0,f.pm)();(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/me");if(!e.ok){g.push("/login");return}let n=await e.json();if(!n.user.isAdmin){g.push("/dashboard");return}t(n.user);let s=await fetch("/api/admin/stats");if(s.ok){let e=await s.json();y(e)}}catch(e){console.error("Auth check failed:",e),g.push("/login")}finally{k(!1)}}()},[g]);let v=async()=>{try{if((await fetch("/api/seed",{method:"POST"})).ok)j({title:"Success",description:"Database reseeded successfully"});else throw Error("Failed to reseed")}catch(e){j({title:"Error",description:"Failed to reseed database",variant:"destructive"})}};return p?(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Loading..."})]})}):e&&n?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(r.Header,{user:e}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-8 w-8 text-primary"}),(0,s.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Admin Dashboard"})]}),(0,s.jsx)("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"System overview and management tools"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Users"}),(0,s.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:n.userCount}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Stories"}),(0,s.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:n.storyCount}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"STAR stories created"})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Questions"}),(0,s.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:n.questionCount}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Interview questions"})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ll,{className:"text-sm font-medium",children:"Companies"}),(0,s.jsx)(x,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:n.companyCount}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Company profiles"})]})]})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsx)(i.ll,{children:"Recent Users"}),(0,s.jsx)(i.SZ,{children:"Latest user registrations"})]}),(0,s.jsx)(i.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:n.recentUsers.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.username}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]})]}),e.isAdmin&&(0,s.jsx)(d.C,{variant:"secondary",children:"Admin"})]},e.id))})})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsx)(i.ll,{children:"Admin Actions"}),(0,s.jsx)(i.SZ,{children:"System management tools"})]}),(0,s.jsx)(i.aY,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(l.z,{variant:"outline",onClick:v,children:"Reseed Database"}),(0,s.jsx)(l.z,{variant:"outline",disabled:!0,children:"Export Data (Coming Soon)"}),(0,s.jsx)(l.z,{variant:"outline",disabled:!0,children:"User Management (Coming Soon)"}),(0,s.jsx)(l.z,{variant:"outline",disabled:!0,children:"System Logs (Coming Soon)"})]})})]})]})})]}):null}},8420:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},5368:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8124:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])},7692:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8293:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},2718:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},3417:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},7226:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},3247:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5929:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},8896:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},5805:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},5922:function(e,t,n){"use strict";n.d(t,{F:function(){return d},f:function(){return o}});var s=n(2265),a=["light","dark"],c="(prefers-color-scheme: dark)",r="undefined"==typeof window,i=s.createContext(void 0),l={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=s.useContext(i))?e:l},o=e=>s.useContext(i)?e.children:s.createElement(m,{...e}),u=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:r=!0,enableColorScheme:l=!0,storageKey:d="theme",themes:o=u,defaultTheme:m=r?"system":"light",attribute:p="data-theme",value:k,children:g,nonce:j}=e,[v,b]=s.useState(()=>x(d,m)),[w,N]=s.useState(()=>x(d)),Z=k?Object.values(k):o,S=s.useCallback(e=>{let t=e;if(!t)return;"system"===e&&r&&(t=y());let s=k?k[t]:t,c=n?f():null,i=document.documentElement;if("class"===p?(i.classList.remove(...Z),s&&i.classList.add(s)):s?i.setAttribute(p,s):i.removeAttribute(p),l){let e=a.includes(m)?m:null,n=a.includes(t)?t:e;i.style.colorScheme=n}null==c||c()},[]),M=s.useCallback(e=>{let t="function"==typeof e?e(e):e;b(t);try{localStorage.setItem(d,t)}catch(e){}},[t]),C=s.useCallback(e=>{N(y(e)),"system"===v&&r&&!t&&S("system")},[v,t]);s.useEffect(()=>{let e=window.matchMedia(c);return e.addListener(C),C(e),()=>e.removeListener(C)},[C]),s.useEffect(()=>{let e=e=>{e.key===d&&M(e.newValue||m)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[M]),s.useEffect(()=>{S(null!=t?t:v)},[t,v]);let E=s.useMemo(()=>({theme:v,setTheme:M,forcedTheme:t,resolvedTheme:"system"===v?w:v,themes:r?[...o,"system"]:o,systemTheme:r?w:void 0}),[v,M,t,w,r,o]);return s.createElement(i.Provider,{value:E},s.createElement(h,{forcedTheme:t,disableTransitionOnChange:n,enableSystem:r,enableColorScheme:l,storageKey:d,themes:o,defaultTheme:m,attribute:p,value:k,children:g,attrs:Z,nonce:j}),g)},h=s.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:r,enableSystem:i,enableColorScheme:l,defaultTheme:d,value:o,attrs:u,nonce:m}=e,h="system"===d,x="class"===r?"var d=document.documentElement,c=d.classList;".concat("c.remove(".concat(u.map(e=>"'".concat(e,"'")).join(","),")"),";"):"var d=document.documentElement,n='".concat(r,"',s='setAttribute';"),f=l?(a.includes(d)?d:null)?"if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'".concat(d,"'"):"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=o?o[e]:e,c=t?e+"|| ''":"'".concat(s,"'"),i="";return l&&n&&!t&&a.includes(e)&&(i+="d.style.colorScheme = '".concat(e,"';")),"class"===r?t||s?i+="c.add(".concat(c,")"):i+="null":s&&(i+="d[s](n,".concat(c,")")),i},p=t?"!function(){".concat(x).concat(y(t),"}()"):i?"!function(){try{".concat(x,"var e=localStorage.getItem('").concat(n,"');if('system'===e||(!e&&").concat(h,")){var t='").concat(c,"',m=window.matchMedia(t);if(m.media!==t||m.matches){").concat(y("dark"),"}else{").concat(y("light"),"}}else if(e){").concat(o?"var x=".concat(JSON.stringify(o),";"):"").concat(y(o?"x[e]":"e",!0),"}").concat(h?"":"else{"+y(d,!1,!1)+"}").concat(f,"}catch(e){}}()"):"!function(){try{".concat(x,"var e=localStorage.getItem('").concat(n,"');if(e){").concat(o?"var x=".concat(JSON.stringify(o),";"):"").concat(y(o?"x[e]":"e",!0),"}else{").concat(y(d,!1,!1),";}").concat(f,"}catch(t){}}();");return s.createElement("script",{nonce:m,dangerouslySetInnerHTML:{__html:p}})}),x=(e,t)=>{let n;if(!r){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},f=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},y=e=>(e||(e=window.matchMedia(c)),e.matches?"dark":"light")}},function(e){e.O(0,[73,596,396,787,971,117,744],function(){return e(e.s=5965)}),_N_E=e.O()}]);